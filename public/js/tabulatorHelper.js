tabultorHelper={formatNumber:function(e,t,a,n){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var i=isFinite(+e)?+e:0,r=isFinite(+t)?Math.abs(t):0,o=void 0===n?",":n,u=void 0===a?".":a,c="";return c=(r?function(e,t){var a=Math.pow(10,t);return""+Math.round(e*a)/a}(i,r):""+Math.round(i)).split("."),c[0].length>3&&(c[0]=c[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(c[1]||"").length<r&&(c[1]=c[1]||"",c[1]+=new Array(r-c[1].length+1).join("0")),c.join(u)},etcEditor:function(e,t,a,n){if("condition_1"!=e.getData().condition&&"condition_2"!=e.getData().condition&&"condition_3"!=e.getData().condition){input=document.createElement("input"),input.style.padding="4px",input.style.width="100%",input.style.boxSizing="border-box";var i=e.getValue(),r=e.getData();return input.value=i,t((function(){input.focus(),input.style.height="100%"})),input.addEventListener("blur",o),input.addEventListener("keydown",(function(e){13==e.keyCode&&o(),27==e.keyCode&&n()})),input}function o(){if(input.value!=i){a(input.value);var t=Number(r.total_costs)+Number(input.value),o=t-Number(r.budget),u=t-parseFloat(r.last_efc);e.getRow().update({efc:t,over_under:o,variance:u});var c=table.searchData([{field:"condition",type:"=",value:"condition_4"},{field:"collectCategory",type:"=",value:r.collectCategory}]),d=0,l=0,v=0,p=0;c.forEach((function(e){d+=Number(e.etc),l+=Number(e.efc),v+=Number(e.over_under),p+=Number(e.variance)}));var b=table.searchData([{field:"category_id",type:"=",value:r.collectCategory}])[0];table.updateData([{id:b.id,etc:d,efc:l,over_under:v,variance:p}]);var f=table.searchData([{field:"has_prodcuation_total",type:"=",value:b.has_prodcuation_total}]),s=0,_=0,h=0,m=0;f.forEach((function(e){s+=Number(e.etc),_+=Number(e.efc),h+=Number(e.over_under),m+=Number(e.variance)}));var y=table.searchData([{field:"is_producation_total",type:"=",value:b.has_prodcuation_total}])[0];table.updateData([{id:y.id,etc:s,efc:_,over_under:h,variance:m}]);var g=table.searchData([{field:"is_producation_total",type:"!=",value:""}]),N=0,D=0,E=0,C=0;g.forEach((function(e){N+=Number(e.etc),D+=Number(e.efc),E+=Number(e.over_under),C+=Number(e.variance)}));var w=table.searchData([{field:"condition",type:"=",value:"grand_total"}])[0];table.updateData([{id:w.id,etc:N,efc:D,over_under:E,variance:C}])}else n()}},efcEditor:function(e,t,a,n){if("condition_1"!=e.getData().condition&&"condition_2"!=e.getData().condition&&"condition_3"!=e.getData().condition){input=document.createElement("input"),input.style.padding="4px",input.style.width="100%",input.style.boxSizing="border-box";var i=e.getValue(),r=e.getData(),o=e.getRow();return input.value=i,t((function(){input.focus(),input.style.height="100%"})),input.addEventListener("blur",u),input.addEventListener("keydown",(function(e){13==e.keyCode&&u(),27==e.keyCode&&n()})),input}function u(){if(input.value!=i){a(input.value);var e=parseFloat(input.value)-parseFloat(r.total_costs),t=Number(input.value)-Number(r.budget),u=Number(input.value)-Number(r.last_efc);o.update({etc:e,over_under:t,variance:u});var c=table.searchData([{field:"condition",type:"=",value:"condition_4"},{field:"collectCategory",type:"=",value:r.collectCategory}]),d=0,l=0,v=0,p=0;c.forEach((function(e){d+=Number(e.etc),l+=Number(e.efc),v+=Number(e.over_under),p+=Number(e.variance)}));var b=table.searchData([{field:"category_id",type:"=",value:r.collectCategory}])[0];table.updateData([{id:b.id,etc:d,efc:l,over_under:v,variance:p}]).then((function(){}));var f=table.searchData([{field:"has_prodcuation_total",type:"=",value:b.has_prodcuation_total}]),s=0,_=0,h=0,m=0;f.forEach((function(e){s+=Number(e.etc),_+=Number(e.efc),h+=Number(e.over_under),m+=Number(e.variance)}));var y=table.searchData([{field:"is_producation_total",type:"=",value:b.has_prodcuation_total}])[0];table.updateData([{id:y.id,etc:s,efc:_,over_under:h,variance:m}]);var g=table.searchData([{field:"is_producation_total",type:"!=",value:""}]),N=0,D=0,E=0,C=0;g.forEach((function(e){N+=Number(e.etc),D+=Number(e.efc),E+=Number(e.over_under),C+=Number(e.variance)}));var w=table.searchData([{field:"condition",type:"=",value:"grand_total"}])[0];table.updateData([{id:w.id,etc:N,efc:D,over_under:E,variance:C}])}else n()}}};